<!DOCTYPE html>
<html>
<head>
	<script src="jquery-3.6.0.min.js"></script>
	<meta http-equiv="refresh" content="5">
	<title>Plant Health</title>
 <script>
    $(document).ready(function() {
      $("#download-btn").click(function() {
        // Make a GET request to the server to download the CSV file
        $.get("plant_data/datalog.csv", function(data) {
          // Create a new Blob object with the CSV data
          var blob = new Blob([data], {type: "text/csv"});
          // Create a new URL object with the Blob data
          var url = window.URL.createObjectURL(blob);
          // Create a new link element to trigger the download
          var link = document.createElement("a");
          link.href = url;
          link.download = "plant_data/datalog.csv";
          document.body.appendChild(link);
          link.click();
          document.body.removeChild(link);
        });
      });
    });
  </script>
	
<script>
  $(document).ready(function() {
    $.ajax({
      url: 'ajax_handler.py',
      type: 'POST',
      success: function() {
        console.log('AJAX call succeeded:');
      },
      error: function(xhr, status, error) {
        console.log('AJAX call failed:', error);
      }
    });
  });
</script>

</head>
<body>
	
	<h1>Monitor of Plant watering</h1>
	<p>This graph contains the date logged over time for the plant.</p>
	<p>The dotted line represents the threshold value for a tolerated soil humidity level. above = good, under = bad.</p>
	<img src="plant_data/graph.png" alt="Graph">
	<br><br>
	<button id="download-btn">Download CSV file</button>
</body>
</html>
